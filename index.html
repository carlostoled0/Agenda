<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Login com Google - YouTube OAuth</title>
  <script>
    async function fetchUserData() {
      const urlParams = new URLSearchParams(window.location.search);
      if (urlParams.has('done')) {
        const response = await fetch('https://agenda-q7di.vercel.app/oauth2callback' + window.location.search);
        const data = await response.json();
        const canal = data.items[0];
        document.getElementById('login').classList.add('hidden');
        document.getElementById('canal').classList.remove('hidden');
        document.getElementById('avatar').src = canal.snippet.thumbnails.default.url;
        document.getElementById('title').textContent = canal.snippet.title;
        document.getElementById('description').textContent = canal.snippet.description || "Descri√ß√£o n√£o informada";
        document.getElementById('views').textContent = parseInt(canal.statistics.viewCount).toLocaleString('pt-BR');
        document.getElementById('subscribers').textContent = parseInt(canal.statistics.subscriberCount).toLocaleString('pt-BR');
        document.getElementById('videos').textContent = parseInt(canal.statistics.videoCount).toLocaleString('pt-BR');
      }
    }
    window.onload = fetchUserData;
  </script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900">
  <div class="max-w-2xl mx-auto mt-20 p-6 bg-white rounded-xl shadow-lg">
    <div id="login" class="text-center">
      <h1 class="text-2xl font-bold mb-6">üîê Login com Google (YouTube OAuth)</h1>
      <a href="https://agenda-q7di.vercel.app/login">
        <button class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg text-lg">
          Fazer login com Google
        </button>
      </a>
    </div>
    <div id="canal" class="hidden mt-8 space-y-4 text-center">
      <img id="avatar" src="" alt="Avatar" class="mx-auto w-24 h-24 rounded-full border" />
      <h2 id="title" class="text-xl font-semibold"></h2>
      <p id="description" class="text-gray-700"></p>
      <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mt-4">
        <div><strong>üëÅÔ∏è Visualiza√ß√µes:</strong><br><span id="views"></span></div>
        <div><strong>üë• Inscritos:</strong><br><span id="subscribers"></span></div>
        <div><strong>üé¨ V√≠deos:</strong><br><span id="videos"></span></div>
      </div>
    </div>
  </div>
</body>
</html>
